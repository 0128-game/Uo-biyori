<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>魚日和 ~あなたの日常にお魚を~</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<div class="wrap" id="wrap">
    <header>
        <h1>魚日和 <span class="small-text"> ~あなたの日常にお魚を~</span></h1>
       <div class="controls">
            <input type="search" id="q" placeholder="タイトル, 材料, 魚名などで検索">
            
            <select id="filterType">
                <option value="all">全て</option>
                <option value="recipe">レシピ</option>
                <option value="pre">下処理</option>
            </select>
            
            <button id="filterOpenBtn">絞り込み設定</button> 
           <button id="proposeOpenBtn">レシピ提案</button>
            
            <select id="sortBy">
                <option value="No" selected>No順 (昇順)</option>
                <option value="-No">No順 (降順)</option>
                <option value="-difficulty">難易度 (高順)</option>
                <option value="difficulty">難易度 (低順)</option>
                <option value="-cost">費用 (高順)</option>
                <option value="cost">費用 (低順)</option>
                <option value="-time">時間 (長順)</option>
                <option value="time">時間 (短順)</option>
                <option value="title">タイトル</option>
            </select>
            <button id="reloadBtn">データ再読み込み</button>
       </div>
    </header>

    <main id="app">
        <span id="message" class="muted">データを読み込み中です...</span>
        
        <table id="recipeTable">
            <thead>
                <tr>
                    <th style="width:80px">No</th>
                    <th style="width:80px">Type</th>
                    <th style="width:80px">Picture</th> 
                    <th>Title / flavortxt</th>
                    <th style="width:160px">魚 / 旬</th>
                    <th style="width:120px">難易度 / 時間</th>
                    <th style="width:120px">費用 / その他情報</th>
                    <th style="width:110px">操作</th>
                </tr>
            </thead>
            <tbody id="tbody">
            </tbody>
        </table>

        <div id="detailContainer" class="detail-container hidden">
            <div class="detail-header">
                <button id="backToListBtn" class="back-button">← リストに戻る</button>
                <h2 id="detailTitle"></h2>
                <div id="detailSubtitle" class="muted"></div>
                <div id="detailImageContainer" style="text-align: center; margin-bottom: 15px;"></div>
                <div id="detailMeta" class="meta"></div>
            </div>
            
            <div class="detail-grid">
                <div class="detail-section">
                    <h3 class="section-title">材料 (Ingredients)</h3>
                    <div id="detailIngredients"></div>
                </div>
                <div class="detail-section" id="propsSection">
                    <h3 class="section-title">道具 (Props)</h3>
                    <div id="detailProps"></div>
                </div>
                <div class="detail-section">
                    <h3 class="section-title">下処理・調理法 (Recipe / Pre-Process)</h3>
                    <div id="detailRecipe"></div>
                </div>
            </div>
            
            <div class="detail-section">
                <h3 class="section-title">メモ (Memo)</h3>
                <div id="detailMemo"></div>
            </div>
        </div>
    </main>
</div>

<!-- 絞り込みモーダル -->
<div id="filterModal" class="modal-base">
  <div class="modal-content" id="filterContent">
    <h2>絞り込み設定</h2>

    <!-- 難易度 -->
   <fieldset class="propose-group">
  <legend>難易度</legend>
  <div class="grid-row">
    <div class="grid-label">上限を選択</div>
    <div class="grid-control">
      <label><input type="radio" name="difficulty" value=""> 指定なし</label>
      <label><input type="radio" name="difficulty" value="1"> 1以下</label>
      <label><input type="radio" name="difficulty" value="2"> 2以下</label>
      <label><input type="radio" name="difficulty" value="3"> 3以下</label>
      <label><input type="radio" name="difficulty" value="4"> 4以下</label>
    </div>
  </div>
</fieldset>


    <!-- 調理時間 -->
    <fieldset class="propose-group" id="timeFilterFieldset">
  <legend>調理時間 (分)</legend>
  <div class="grid-row">
    <div class="grid-label">上限を選択</div>
    <div class="grid-control">
      <label><input type="radio" name="time" value=""> 制限なし</label>
      <label><input type="radio" name="time" value="15"> 15分以内</label>
      <label><input type="radio" name="time" value="30"> 30分以内</label>
      <label><input type="radio" name="time" value="60"> 60分以内</label>
      <label><input type="radio" name="time" value="custom"> カスタム</label>
    </div>
  </div>
  <div id="customTimeInputContainer" style="display:none; margin-top:10px;">
    <input type="number" id="customTimeInput" placeholder="分を入力" style="width:100px;">
    <button id="applyCustomTimeBtn">決定</button>
  </div>
</fieldset>

    <!-- 費用 -->
   <fieldset class="propose-group" id="costFilterFieldset">
  <legend>費用 (円)</legend>
  <div class="grid-row">
    <div class="grid-label">上限を選択</div>
    <div class="grid-control">
      <label><input type="radio" name="cost" value=""> 制限なし</label>
      <label><input type="radio" name="cost" value="500"> 500円以下</label>
      <label><input type="radio" name="cost" value="1000"> 1000円以下</label>
      <label><input type="radio" name="cost" value="2000"> 2000円以下</label>
      <label><input type="radio" name="cost" value="custom"> カスタム</label>
    </div>
  </div>
  <div id="customCostInputContainer" style="display:none; margin-top:10px;">
    <input type="number" id="customCostInput" placeholder="円を入力" style="width:100px;">
    <button id="applyCustomCostBtn">決定</button>
  </div>
</fieldset>

    <!-- 操作ボタン -->
    <div style="margin-top:20px; text-align:center;">
      <button id="applyFilterBtn" style="margin-right:10px;">適用して閉じる</button>
      <button id="cancelFilterBtn">適用せずに閉じる</button>
      <button id="resetFiltersBtn" type="button">絞り込みリセット</button>
    </div>
  </div>
</div>


<!-- レシピ提案モーダル -->
<div id="proposeModal" class="modal-base">
  <div class="modal-content">
    <button class="close-propose" id="closeProposeBtn">&times;</button>
    <div class="modal-left">
      <h2>レシピ提案</h2>
        <fieldset class="propose-group">
            <legend>提案数</legend>
            <div class="grid-row">
                <div class="grid-label">種類</div>
                <div class="grid-control">
                    <label><input type="radio" name="meals" value="1" checked>1つ提案</label>
                    <label><input type="radio" name="meals" value="3"> 3つ提案</label>
                    <label><input type="radio" name="meals" value="9"> 9つ提案</label>
                    <label><input type="radio" name="meals" value="custom"> カスタム</label>
                </div>
            </div>
            <div class="grid-row" id="customMealRow" style="margin-top:8px; display:none;">
                <div class="grid-label">カスタム値</div>
                <div class="grid-control">
                    <input type="number" id="customMealInput" min="1" max="99" value="1">
                    <button id="customMealConfirm">決定</button>
                </div>
            </div>
        </fieldset>
        <fieldset class="propose-group">
            <legend>使いたい魚選択</legend>
            <div class="grid-row">
                <div class="grid-label">指定</div>
                <div class="grid-control">
                    <label><input type="radio" name="includeFishMode" value="none" checked> 指定しない</label>
                    <label><input type="radio" name="includeFishMode" value="specify"> 指定する</label>
                </div>
            </div>
            <div class="grid-row" id="includeFishRow" style="margin-top:8px; display:none;">
                <div class="grid-label">魚</div>
                <div class="grid-control" id="includeFishContainer"></div>
            </div>
        </fieldset>
        <fieldset class="propose-group">
            <legend>除外する魚選択</legend>
            <div class="grid-row">
                <div class="grid-label">指定</div>
                <div class="grid-control"> 
                     <label><input type="radio" name="excludeFishMode" value="none" checked> 指定しない</label>
                    <label><input type="radio" name="excludeFishMode" value="specify"> 指定する</label>
                </div>
            </div>
            <div class="grid-row" id="excludeFishRow" style="margin-top:8px; display:none;">
                <div class="grid-label">魚</div>
                <div class="grid-control" id="excludeFishContainer"></div>
            </div>
        </fieldset>
        <fieldset class="propose-group">
            <legend>難易度選択</legend>
            <div class="grid-row">
                <div class="grid-label">設定</div>
                <div class="grid-control">
                    <label><input type="radio" name="difficulty" value=""> 制限なし</label>
                    <label><input type="radio" name="difficulty" value="1"> 1以下</label>
                    <label><input type="radio" name="difficulty" value="2"> 2以下</label>
                    <label><input type="radio" name="difficulty" value="3"> 3以下</label>
                    <label><input type="radio" name="difficulty" value="4"> 4以下</label>
                </div>
            </div>
        </fieldset>
        <fieldset class="propose-group">
            <legend>時間選択 (分)</legend>
            <div class="grid-row">
                <div class="grid-label">設定</div>
                <div class="grid-control">
                    <label><input type="radio" name="time" value=""> 制限なし</label>
                    <label><input type="radio" name="time" value="15"> 15分以内</label>
                    <label><input type="radio" name="time" value="30"> 30分以内</label>
                    <label><input type="radio" name="time" value="60"> 60分以内</label>
                    <label><input type="radio" name="time" value="custom"> カスタム</label>
                </div>
            </div>
            <div class="grid-row" id="customTimeRow" style="margin-top:8px; display:none;">
                <div class="grid-label">カスタム</div>
                <div class="grid-control">
                    <input type="number" id="customTimeInput" min="1" max="120" placeholder="最大時間">
                    <button id="customTimeConfirm">決定</button>
                </div>
            </div>
        </fieldset>
        <fieldset class="propose-group">
            <legend>費用選択 (円)</legend>
            <div class="grid-row">
                <div class="grid-label">設定</div>
                <div class="grid-control">
                    <label><input type="radio" name="cost" value=""> 制限なし</label>
                    <label><input type="radio" name="cost" value="500"> ¥500以下</label>
                    <label><input type="radio" name="cost" value="1000"> ¥1000以下</label>
                    <label><input type="radio" name="cost" value="2000"> ¥2000以下</label>
                    <label><input type="radio" name="cost" value="custom"> カスタム</label>
                </div>
            </div>
            <div class="grid-row" id="customCostRow" style="margin-top:8px; display:none;">
                <div class="grid-label">カスタム</div>
                <div class="grid-control">
                    <input type="number" id="customCostInput" min="100" max="5000" placeholder="最大費用">
                    <button id="customCostConfirm">決定</button>
                </div>
            </div>
        </fieldset>
     <fieldset class="propose-group">
  <legend>季節を考慮するか</legend>
  <div class="grid-row">
    <div class="grid-label">設定</div>
    <div class="grid-control">
      <label>
        <input type="checkbox" id="considerSeasonCheckbox" checked>
        季節に合ったレシピを優先する
      </label>
    </div>
  </div>
</fieldset>



      <!-- スコア同値時の優先基準 -->
      <fieldset class="propose-group">
        <legend>優先基準</legend>
        <div class="grid-row">
          <div class="grid-label">優先</div>
          <div class="grid-control">
            <label><input type="radio" name="tieBreaker" value="difficulty" checked> 難易度が低い</label>
            <label><input type="radio" name="tieBreaker" value="time"> 時間が短い</label>
            <label><input type="radio" name="tieBreaker" value="cost"> コストが安い</label>
            <label><input type="radio" name="tieBreaker" value="random"> ランダム</label>
          </div>
        </div>
      </fieldset>
    </div>
    <div id="summaryPanel" aria-live="polite"></div>
  </div>
</div>

<!-- 提案結果モーダル -->
<div id="proposalModal" class="modal-base">
  <div class="modal-content">
    <h2>レシピ提案結果</h2>
    <div id="proposalResults"></div>
    <div class="modal-buttons">
      <button id="backToSettingsBtn">戻る</button>
      <button id="closeProposalBtn">閉じる</button>
    </div>
  </div>
</div>

</body>
</html>


    
<script src="script.js"></script>

</body>
</html>
